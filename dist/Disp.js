(()=>{"use strict";function e(e,t,o){const i=CM.Options.ScaleDecimals+1;if(e===1/0)return"Infinity";if(void 0===e)return"0";if(0===CM.Options.Scale)return CM.Backup.Beautify(e,t);if(Number.isFinite(e)){let n="";if(0===e)return e.toString();if(e>.001&&e<CM.Options.ScaleCutoff){n=e.toFixed(2),CM.Options.ScaleSeparator&&(n=n.toLocaleString("nl"));for(let e=0;e<3;e++)"0"!==n[n.length-1]&&"."!==n[n.length-1]||(n=n.slice(0,-1));return n}if(4===CM.Options.Scale&&!o||4===o)n=e.toExponential(i).toString().replace("e","E");else{const t=e.toExponential().toString(),a=Math.floor(t.slice(t.indexOf("e")+1)/3);n=(e/Number("1e"+3*a)).toFixed(i),1===CM.Options.Scale&&!o||1===o?e>=.01&&e<Number("1e"+3*CM.Data.metric.length)?n+=` ${CM.Data.metric[a]}`:n=CM.Disp.Beautify(e,0,4):2===CM.Options.Scale&&!o||2===o?e>=.01&&e<Number("1e"+3*CM.Data.shortScale.length)?n+=` ${CM.Data.shortScale[a]}`:n=CM.Disp.Beautify(e,0,4):3===CM.Options.Scale&&!o||3===o?e>=.01&&e<Number("1e"+3*CM.Data.shortScaleAbbreviated.length)?n+=` ${CM.Data.shortScaleAbbreviated[a]}`:n=CM.Disp.Beautify(e,0,4):(5===CM.Options.Scale&&!o||5===o)&&(n+="E"+3*a)}return""===n&&(console.log(`Could not beautify number with CM.Disp.Beautify: ${e}`),n=CM.Backup.Beautify(e,t)),CM.Options.ScaleSeparator&&(n=n.replace(".",",")),n}return console.log(`Could not beautify number with CM.Disp.Beautify: ${e}`),CM.Backup.Beautify(e,t)}function t(e,t){if(e===1/0)return e;e=Math.ceil(e);const o=Math.floor(e/31557600),i=Math.floor(e%31557600/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60);let l="";if(CM.Options.TimeFormat){if(e>315576e4)return"XX:XX:XX:XX:XX";l+=(o<10?"0":"")+o+":",l+=(i<10?"0":"")+i+":",l+=(n<10?"0":"")+n+":",l+=(a<10?"0":"")+a+":",l+=(s<10?"0":"")+s}else{if(e>7776e5)return t?"Over 9000 days!":">9000d";l+=o>0?o+(t?1===o?" year":" years":"y")+", ":"",l+=i>0?i+(t?1===i?" day":" days":"d")+", ":"",(l.length>0||n>0)&&(l+=n+(t?1===n?" hour":" hours":"h")+", "),(l.length>0||a>0)&&(l+=a+(t?1===a?" minute":" minutes":"m")+", "),l+=s+(t?1===s?" second":" seconds":"s")}return l}function o(e){let t,o;return e<0?(o=CM.Options.TimeFormat?"00:00:00:00:00":"Done!",t=CM.Disp.colorGreen):(o=CM.Disp.FormatTime(e),t=e>300?CM.Disp.colorRed:e>60?CM.Disp.colorOrange:CM.Disp.colorYellow),{text:o,color:t}}const i="Purple";function n(e){e.appendChild(a("Bonus Income"));const t=document.createElement("div");t.style.marginBottom="4px",t.style.color="white",t.id="CMTooltipIncome",e.appendChild(t),e.appendChild(a("Bonus Cookies per Click")),e.lastChild.style.display="none";const o=document.createElement("div");o.style.marginBottom="4px",o.style.color="white",o.style.display="none",o.id="CMTooltipCookiePerClick",e.appendChild(o),e.appendChild(a("Payback Period"));const i=document.createElement("div");i.style.marginBottom="4px",i.id="CMTooltipPP",e.appendChild(i),e.appendChild(a("Time Left"));const n=document.createElement("div");if(n.id="CMTooltipTime",e.appendChild(n),"b"===CM.Disp.tooltipType){e.appendChild(a("Production left till next achievement")),e.lastChild.id="CMTooltipProductionHeader";const t=document.createElement("div");t.id="CMTooltipProduction",e.appendChild(t)}}function a(e){const t=document.createElement("div");return t.style.fontWeight="bold",t.id=`${e}Title`,t.className="CMTextBlue",t.textContent=e,t}function s(){if(CM.Sim.CopyData(),"none"!==l("tooltipAnchor").style.display&&l("CMTooltipArea")){l("CMTooltipArea").innerHTML="";const s=function(){l("tooltip").firstChild.style.paddingBottom="4px";const e=document.createElement("div");return e.style.border="1px solid",e.style.padding="4px",e.style.margin="0px -4px",e.id="CMTooltipBorder",e.className="CMTextGray",e}();l("CMTooltipArea").appendChild(s),"b"===CM.Disp.tooltipType?function(){if(1===CM.Options.TooltipBuildUpgrade&&1===Game.buyMode){n(l("CMTooltipBorder"));let e=`Objects${Game.buyBulk}`;if(1===Game.buyMode?CM.Disp.LastTargetTooltipBuilding=e:e=CM.Disp.LastTargetTooltipBuilding,CM.Disp.TooltipPrice=Game.Objects[CM.Disp.tooltipName].bulkPrice,CM.Disp.TooltipBonusIncome=CM.Cache[e][CM.Disp.tooltipName].bonus,1===CM.Options.TooltipBuildUpgrade&&1===Game.buyMode){l("CMTooltipIncome").textContent=Beautify(CM.Disp.TooltipBonusIncome,2);const t=Math.round(CM.Disp.TooltipBonusIncome/Game.cookiesPs*1e4);Number.isFinite(t)&&0!==t&&(l("CMTooltipIncome").textContent+=` (${t/100}% of income)`),l("CMTooltipBorder").className=CM.Disp.colorTextPre+CM.Cache[e][CM.Disp.tooltipName].color,l("CMTooltipPP").textContent=Beautify(CM.Cache[e][CM.Disp.tooltipName].pp,2),l("CMTooltipPP").className=CM.Disp.colorTextPre+CM.Cache[e][CM.Disp.tooltipName].color;const i=o((CM.Disp.TooltipPrice-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS());l("CMTooltipTime").textContent=i.text,"Done!"===i.text&&Game.cookies<CM.Cache[e][CM.Disp.tooltipName].price?l("CMTooltipTime").textContent=`${i.text} (with Wrink)`:l("CMTooltipTime").textContent=i.text,l("CMTooltipTime").className=CM.Disp.colorTextPre+i.color}l("CMTooltipProductionHeader").style.display="none",l("CMTooltipTime").style.marginBottom="0px";for(const e of Object.keys(Game.Objects[CM.Disp.tooltipName].productionAchievs))if(!Game.HasAchiev(Game.Objects[CM.Disp.tooltipName].productionAchievs[e].achiev.name)){const t=Game.Objects[CM.Disp.tooltipName].productionAchievs[e];l("CMTooltipTime").style.marginBottom="4px",l("CMTooltipProductionHeader").style.display="",l("CMTooltipProduction").className=`ProdAchievement${CM.Disp.tooltipName}`,l("CMTooltipProduction").textContent=Beautify(t.pow-CM.Sim.Objects[CM.Disp.tooltipName].totalCookies,15),l("CMTooltipProduction").style.color="white";break}}else l("CMTooltipArea").style.display="none"}():"u"===CM.Disp.tooltipType?function(){if(n(l("CMTooltipBorder")),CM.Disp.TooltipBonusIncome=CM.Cache.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].bonus,CM.Disp.TooltipPrice=Game.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].getPrice(),CM.Disp.TooltipBonusMouse=CM.Cache.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].bonusMouse,1===CM.Options.TooltipBuildUpgrade){l("CMTooltipIncome").textContent=Beautify(CM.Disp.TooltipBonusIncome,2);const t=Math.round(CM.Disp.TooltipBonusIncome/Game.cookiesPs*1e4);"0"!==l("CMTooltipIncome").textContent||"b"!==CM.Disp.tooltipType&&"u"!==CM.Disp.tooltipType?(Number.isFinite(t)&&0!==t&&(l("CMTooltipIncome").textContent+=` (${t/100}% of income)`),l("CMTooltipBorder").className=CM.Disp.colorTextPre+CM.Cache.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].color,CM.Disp.TooltipBonusMouse&&(l("CMTooltipCookiePerClick").textContent=Beautify(CM.Disp.TooltipBonusMouse),l("CMTooltipCookiePerClick").style.display="block",l("CMTooltipCookiePerClick").previousSibling.style.display="block"),0===CM.Disp.TooltipBonusIncome&&CM.Disp.TooltipBonusMouse?(l("CMTooltipPP").textContent=`${Beautify(CM.Disp.TooltipPrice/CM.Disp.TooltipBonusMouse)} Clicks`,l("CMTooltipPP").style.color="white"):(l("CMTooltipPP").textContent=Beautify(CM.Cache.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].pp,2),l("CMTooltipPP").className=CM.Disp.colorTextPre+CM.Cache.Upgrades[Game.UpgradesInStore[CM.Disp.tooltipName].name].color)):(l("Bonus IncomeTitle").style.display="none",l("CMTooltipIncome").style.display="none",l("Payback PeriodTitle").style.display="none",l("CMTooltipPP").style.display="none");const i=o((CM.Disp.TooltipPrice-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS());if(l("CMTooltipTime").textContent=i.text,"Done!"===i.text&&Game.cookies<Game.UpgradesInStore[CM.Disp.tooltipName].getPrice()?l("CMTooltipTime").textContent=`${i.text} (with Wrink)`:l("CMTooltipTime").textContent=i.text,l("CMTooltipTime").className=CM.Disp.colorTextPre+i.color,"Chocolate egg"===Game.UpgradesInStore[CM.Disp.tooltipName].name){l("CMTooltipBorder").lastChild.style.marginBottom="4px",l("CMTooltipBorder").appendChild(a("Cookies to be gained (Currently/Max)"));const t=document.createElement("div");t.style.color="white",t.textContent=`${e(.05*Game.cookies)} / ${e(CM.Cache.lastChoEgg)}`,l("CMTooltipBorder").appendChild(t)}}else l("CMTooltipArea").style.display="none"}():"s"===CM.Disp.tooltipType?function(){if(1===CM.Options.TooltipLump){const e=l("CMTooltipBorder");e.appendChild(a("Current Sugar Lump"));const t=document.createElement("div");t.id="CMTooltipTime",e.appendChild(t);const o=CM.Disp.GetLumpColor(Game.lumpCurrentType);t.textContent=o.text,t.className=CM.Disp.colorTextPre+o.color}else l("CMTooltipArea").style.display="none"}():"g"===CM.Disp.tooltipType?function(){const e=Game.Objects["Wizard tower"].minigame,t=e.getSpellCost(e.spellsById[CM.Disp.tooltipName]);if(1===CM.Options.TooltipGrim&&t<=e.magicM){const i=l("CMTooltipBorder");i.appendChild(a("Time Left"));const n=document.createElement("div");n.id="CMTooltipTime",i.appendChild(n);const s=o(CM.Disp.CalculateGrimoireRefillTime(e.magic,e.magicM,t));if(n.textContent=s.text,n.className=CM.Disp.colorTextPre+s.color,t<=e.magic){i.appendChild(a("Recover Time"));const n=document.createElement("div");n.id="CMTooltipRecover",i.appendChild(n);const s=o(CM.Disp.CalculateGrimoireRefillTime(Math.max(0,e.magic-t),e.magicM,e.magic));n.textContent=s.text,n.className=CM.Disp.colorTextPre+s.color}if("0"===CM.Disp.tooltipName){i.appendChild(a("Cookies to be gained/lost"));const e=document.createElement("div");e.id="x",i.appendChild(e);const t=document.createElement("span");t.style.color="#33FF00",t.textContent=Beautify(Math.min(.15*(Game.cookies+CM.Disp.GetWrinkConfigBank()),60*CM.Cache.NoGoldSwitchCookiesPS*30),2),e.appendChild(t);const o=document.createElement("span");o.textContent=" / ",e.appendChild(o);const n=document.createElement("span");n.style.color="red",n.textContent=Beautify(60*CM.Cache.NoGoldSwitchCookiesPS*15,2),e.appendChild(n)}l("CMTooltipArea").appendChild(i)}else l("CMTooltipArea").style.display="none"}():"p"===CM.Disp.tooltipType?function(){const t=Game.Objects.Farm.minigame;if(CM.Options.TooltipPlots&&0!==t.plot[CM.Disp.tooltipName[1]][CM.Disp.tooltipName[0]][0]){const o=t.plot[CM.Disp.tooltipName[1]][CM.Disp.tooltipName[0]][1]>t.plantsById[t.plot[CM.Disp.tooltipName[1]][CM.Disp.tooltipName[0]][0]-1].matureBase,i=t.plantsById[t.plot[CM.Disp.tooltipName[1]][CM.Disp.tooltipName[0]][0]-1].name;l("CMTooltipBorder").appendChild(a("Reward (Current / Maximum)"));const n=document.createElement("div");n.id="CMTooltipPlantReward",l("CMTooltipBorder").appendChild(n),"Bakeberry"===i?l("CMTooltipPlantReward").textContent=`${o?e(Math.min(.03*Game.cookies,60*Game.cookiesPs*30)):"0"} / ${e(60*Game.cookiesPs*30)}`:"Chocoroot"===i||"White chocoroot"===i?l("CMTooltipPlantReward").textContent=`${o?e(Math.min(.03*Game.cookies,60*Game.cookiesPs*3)):"0"} / ${e(60*Game.cookiesPs*3)}`:"Queenbeet"===i?l("CMTooltipPlantReward").textContent=`${o?e(Math.min(.04*Game.cookies,60*Game.cookiesPs*60)):"0"} / ${e(60*Game.cookiesPs*60)}`:"Duketater"===i?l("CMTooltipPlantReward").textContent=`${o?e(Math.min(.08*Game.cookies,60*Game.cookiesPs*120)):"0"} / ${e(60*Game.cookiesPs*120)}`:l("CMTooltipArea").style.display="none"}else l("CMTooltipArea").style.display="none"}():"ha"===CM.Disp.tooltipType&&function(){const t=Game.Objects.Farm.minigame;if(CM.Options.TooltipLump){l("CMTooltipBorder").appendChild(a("Cookies gained from harvesting:"));let o=0,i=0;Game.keys[16]&&Game.keys[17]&&(i=1);for(let e=0;e<6;e++)for(let n=0;n<6;n++)if(t.plot[e][n][0]>=1){const a=t.plot[e][n],s=t.plantsById[a[0]-1],l=s.name;let r=!0;i&&s.immortal&&(r=!1),a[1]<s.matureBase&&(r=!1),r&&"Bakeberry"===l?o+=Math.min(.03*Game.cookies,60*Game.cookiesPs*30):r&&"Chocoroot"===l||"White chocoroot"===l?o+=Math.min(.03*Game.cookies,60*Game.cookiesPs*3):r&&"Queenbeet"===l?o+=Math.min(.04*Game.cookies,60*Game.cookiesPs*60):r&&"Duketater"===l&&(o+=Math.min(.08*Game.cookies,60*Game.cookiesPs*120))}l("CMTooltipBorder").appendChild(document.createTextNode(e(o)))}else l("CMTooltipArea").style.display="none"}(),function(){if("b"===CM.Disp.tooltipType||"u"===CM.Disp.tooltipType){null===document.getElementById("CMDispTooltipWarningParent")&&(l("tooltipAnchor").appendChild(function(){const e=document.createElement("div");e.style.position="absolute",e.style.display="block",e.style.left="auto",e.style.bottom="auto",e.id="CMDispTooltipWarningParent";const t=function(e,t,o,i,n){const a=document.createElement("div");a.id=e,a.style.display="none",a.style.transition="opacity 0.1s ease-out",a.className="CMBorder"+t,a.style.padding="2px",a.style.background="#000 url(img/darkNoise.png)";const s=document.createElement("div");a.appendChild(s);const l=document.createElement("span");l.className="CMText"+t,l.style.fontWeight="bold",l.textContent=o,s.appendChild(l),s.appendChild(document.createTextNode(i));const r=document.createElement("div");a.appendChild(r);const p=document.createElement("span");return p.id=n,r.appendChild(document.createTextNode("Deficit: ")),r.appendChild(p),a};return e.appendChild(t("CMDispTooltipWarnLucky","Red","Warning: ",'Purchase of this item will put you under the number of Cookies required for "Lucky!"',"CMDispTooltipWarnLuckyText")),e.firstChild.style.marginBottom="4px",e.appendChild(t("CMDispTooltipWarnLuckyFrenzy","Yellow","Warning: ",'Purchase of this item will put you under the number of Cookies required for "Lucky!" (Frenzy)',"CMDispTooltipWarnLuckyFrenzyText")),e.lastChild.style.marginBottom="4px",e.appendChild(t("CMDispTooltipWarnConjure",i,"Warning: ",'Purchase of this item will put you under the number of Cookies required for "Conjure Baked Goods"',"CMDispTooltipWarnConjureText")),e.lastChild.style.marginBottom="4px",e.appendChild(t("CMDispTooltipWarnConjureFrenzy",i,"Warning: ",'Purchase of this item will put you under the number of Cookies required for "Conjure Baked Goods" (Frenzy)',"CMDispTooltipWarnConjureFrenzyText")),e.lastChild.style.marginBottom="4px",e.appendChild(t("CMDispTooltipWarnEdifice",i,"Warning: ",'Purchase of this item will put you under the number of Cookies needed for "Spontaneous Edifice" to possibly give you your most expensive building"',"CMDispTooltipWarnEdificeText")),e.lastChild.style.marginBottom="4px",e.appendChild(t("CMDispTooltipWarnUser","Red","Warning: ",`Purchase of this item will put you under the number of Cookies equal to ${CM.Options.ToolWarnUser} seconds of CPS`,"CMDispTooltipWarnUserText")),e}()),CM.Disp.ToggleToolWarnPos()),0===CM.Options.ToolWarnPos?l("CMDispTooltipWarningParent").style.right="0px":l("CMDispTooltipWarningParent").style.top=`${l("tooltip").offsetHeight}px`,l("CMDispTooltipWarningParent").style.width=l("tooltip").offsetWidth-6+"px";const e=Game.cookies+CM.Disp.GetWrinkConfigBank()-CM.Disp.TooltipPrice,o=CM.Options.ToolWarnBon?CM.Disp.TooltipBonusIncome:0;let n=CM.Cache.Lucky;if(1===CM.Options.ToolWarnBon){let e=CM.Disp.TooltipBonusIncome;e/=CM.Cache.getCPSBuffMult(),n+=60*e*15/.15}if(1===CM.Options.ToolWarnLucky&&e<n&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnLucky").style.display="",l("CMDispTooltipWarnLuckyText").textContent=`${Beautify(n-e)} (${t((n-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnLucky").style.display="none",1===CM.Options.ToolWarnLuckyFrenzy){const i=7*n;e<i&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnLuckyFrenzy").style.display="",l("CMDispTooltipWarnLuckyFrenzyText").textContent=`${Beautify(i-e)} (${t((i-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnLuckyFrenzy").style.display="none"}else l("CMDispTooltipWarnLuckyFrenzy").style.display="none";if(1===CM.Options.ToolWarnConjure){const i=2*n;e<i&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnConjure").style.display="",l("CMDispTooltipWarnConjureText").textContent=`${Beautify(i-e)} (${t((i-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnConjure").style.display="none"}else l("CMDispTooltipWarnConjure").style.display="none";if(1===CM.Options.ToolWarnConjureFrenzy){const i=2*n*7;e<i&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnConjureFrenzy").style.display="",l("CMDispTooltipWarnConjureFrenzyText").textContent=`${Beautify(i-e)} (${t((i-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnConjureFrenzy").style.display="none"}else l("CMDispTooltipWarnConjureFrenzy").style.display="none";1===CM.Options.ToolWarnEdifice&&Game.Objects["Wizard tower"].minigameLoaded&&CM.Cache.Edifice&&e<CM.Cache.Edifice&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnEdifice").style.display="",l("CMDispTooltipWarnEdificeText").textContent=`${Beautify(CM.Cache.Edifice-e)} (${t((CM.Cache.Edifice-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnEdifice").style.display="none",CM.Options.ToolWarnUser>0&&e<CM.Options.ToolWarnUser*CM.Disp.GetCPS()&&("b"!==CM.Disp.tooltipType||1===Game.buyMode)?(l("CMDispTooltipWarnUser").style.display="",l("CMDispTooltipWarnUser").children[0].textContent=`Purchase of this item will put you under the number of Cookies equal to ${CM.Options.ToolWarnUser} seconds of CPS`,l("CMDispTooltipWarnUserText").textContent=`${Beautify(CM.Options.ToolWarnUser*CM.Disp.GetCPS()-e)} (${t((CM.Options.ToolWarnUser*CM.Disp.GetCPS()-e)/(CM.Disp.GetCPS()+o))})`):l("CMDispTooltipWarnUser").style.display="none"}else null!==l("CMDispTooltipWarningParent")&&l("CMDispTooltipWarningParent").remove()}()}else null===l("CMTooltipArea")&&null!==l("CMDispTooltipWarningParent")&&l("CMDispTooltipWarningParent").remove()}CM.Disp.colorGray,CM.Disp.colorBlue,CM.Disp.colorGreen,CM.Disp.colorYellow,CM.Disp.colorOrange,CM.Disp.colorRed,CM.Disp.colorPurple,CM.Disp.colorPink,CM.Disp.colorBrown,CM.Disp.colorYellow,CM.Disp.colorBrown,CM.Disp.colorGreen,CM.Disp.colorRed,CM.Disp.colorBlue,CM.Disp.colorPink;const r={Beautify:e,FormatTime:t,GetTimeColor:o,Tooltip:function(e,t){if("b"===e){if(l("tooltip").innerHTML=Game.Objects[t].tooltip(),1===CM.Options.TooltipAmor){const e=CM.Sim.BuildingGetPrice(Game.Objects[t],Game.Objects[t].basePrice,0,Game.Objects[t].free,Game.Objects[t].amount),o=e-Game.Objects[t].totalCookies;o>0&&(l("tooltip").innerHTML=l("tooltip").innerHTML.split("so far</div>").join(`so far<br/>&bull; <b>${Beautify(o)}</b> ${1===Math.floor(o)?"cookie":"cookies"} left to amortize (${CM.Disp.GetTimeColor((e-Game.Objects[t].totalCookies)/(Game.Objects[t].storedTotalCps*Game.globalCpsMult)).text})</div>`))}-1===Game.buyMode&&(l("tooltip").innerHTML=l("tooltip").innerHTML.split(Beautify(Game.Objects[t].bulkPrice)).join(Beautify(CM.Sim.BuildingSell(Game.Objects[t],Game.Objects[t].basePrice,Game.Objects[t].amount,Game.Objects[t].free,Game.buyBulk,1))))}else if("u"===e){if(!Game.UpgradesInStore[t])return"";l("tooltip").innerHTML=Game.crateTooltip(Game.UpgradesInStore[t],"store")}else"s"===e?l("tooltip").innerHTML=Game.lumpTooltip():"g"===e?l("tooltip").innerHTML=Game.Objects["Wizard tower"].minigame.spellTooltip(t)():"p"===e?l("tooltip").innerHTML=Game.ObjectsById[2].minigame.tileTooltip(t[0],t[1])():"ha"===e&&(l("tooltip").innerHTML=Game.ObjectsById[2].minigame.toolTooltip(1)());if("b"===e&&1===Game.buyMode||"u"===e||"s"===e||"g"===e||"p"===e&&!Game.keys[16]||"ha"===e){const e=document.createElement("div");e.id="CMTooltipArea",l("tooltip").appendChild(e)}return CM.Disp.tooltipType=e,CM.Disp.tooltipName=t,s(),l("tooltip").innerHTML},UpdateTooltip:s,CreateSimpleTooltip:function(e,t,o){CM.Disp[e]=document.createElement("div");const i=document.createElement("div");i.style.minWidth=o,i.style.marginBottom="4px";const n=document.createElement("div");n.style.textAlign="left",n.textContent=t,i.appendChild(n),CM.Disp[e].appendChild(i)},CheckWrinklerTooltip:function(){if(1===CM.Options.TooltipWrink&&1===CM.Disp.TooltipWrinklerArea){let e=!1;for(const t of Object.keys(Game.wrinklers)){const o=Game.wrinklers[t];if(o.phase>0&&o.selected){if(e=!0,0!==CM.Disp.TooltipWrinklerBeingShown[t]&&void 0!==CM.Disp.TooltipWrinklerBeingShown[t])break;{const e=document.createElement("div"),o=document.createElement("div");o.style.minWidth="120px",o.style.marginBottom="4px";const i=document.createElement("div");i.style.textAlign="center",i.id="CMTooltipWrinkler",o.appendChild(i),e.appendChild(o),Game.tooltip.draw(this,escape(e.innerHTML)),CM.Disp.TooltipWrinkler=t,CM.Disp.TooltipWrinklerBeingShown[t]=1}}else CM.Disp.TooltipWrinklerBeingShown[t]=0}e||Game.tooltip.hide()}},UpdateWrinklerTooltip:function(){if(1===CM.Options.TooltipWrink&&null!==l("CMTooltipWrinkler")){let e=Game.wrinklers[CM.Disp.TooltipWrinkler].sucked,t=1.1;if(Game.Has("Sacrilegious corruption")&&(t*=1.05),1===Game.wrinklers[CM.Disp.TooltipWrinkler].type&&(t*=3),e*=t,Game.Has("Wrinklerspawn")&&(e*=1.05),CM.Sim.Objects.Temple.minigameLoaded){const t=Game.hasGod("scorn");1===t?e*=1.15:2===t?e*=1.1:3===t&&(e*=1.05)}l("CMTooltipWrinkler").textContent=Beautify(e)}},UpdateTooltipLocation:function(){if("store"===Game.tooltip.origin){let e=0;1===CM.Options.ToolWarnLucky&&1===CM.Options.ToolWarnPos&&null!==l("CMDispTooltipWarningParent")&&(e=l("CMDispTooltipWarningParent").clientHeight-4),Game.tooltip.tta.style.top=`${Math.min(parseInt(Game.tooltip.tta.style.top),l("game").clientHeight+l("topBar").clientHeight-Game.tooltip.tt.clientHeight-e-46)}px`}},ToggleToolWarnPos:function(){null!==l("CMDispTooltipWarningParent")&&(0===CM.Options.ToolWarnPos?(l("CMDispTooltipWarningParent").style.top="auto",l("CMDispTooltipWarningParent").style.margin="4px -4px",l("CMDispTooltipWarningParent").style.padding="3px 4px"):(l("CMDispTooltipWarningParent").style.right="auto",l("CMDispTooltipWarningParent").style.margin="4px",l("CMDispTooltipWarningParent").style.padding="4px 3px"))}};CM.Disp=r,CM.Disp.ReplaceTooltipUpgrade=function(){CM.Disp.TooltipUpgradeBackup=[];for(const e of Object.keys(Game.UpgradesInStore))null!==l(`upgrade${e}`).onmouseover&&(CM.Disp.TooltipUpgradeBackup[e]=l(`upgrade${e}`).onmouseover,l(`upgrade${e}`).onmouseover=function(){Game.mouseDown||(Game.setOnCrate(this),Game.tooltip.dynamic=1,Game.tooltip.draw(this,(function(){return CM.Disp.Tooltip("u",`${e}`)}),"store"),Game.tooltip.wobble())})},CM.Disp.GetWrinkConfigBank=function(){return 1===CM.Options.CalcWrink?CM.Cache.WrinklersTotal:2===CM.Options.CalcWrink?CM.Cache.WrinklersFattest[0]:0},CM.Disp.PopAllNormalWrinklers=function(){for(const e of Object.keys(Game.wrinklers))Game.wrinklers[e].sucked>0&&0===Game.wrinklers[e].type&&(Game.wrinklers[e].hp=0)},CM.Disp.GetCPS=function(){return CM.Options.CPSMode?CM.Cache.AvgCPS:0===CM.Options.CalcWrink?Game.cookiesPs*(1-Game.cpsSucked):1===CM.Options.CalcWrink?Game.cookiesPs*(CM.Cache.CurrWrinklerCPSMult+(1-.05*CM.Cache.CurrWrinklerCount)):2===CM.Options.CalcWrink&&1===Game.wrinklers[CM.Cache.WrinklersFattest[1]].type?Game.cookiesPs*(3*CM.Cache.CurrWrinklerCPSMult/CM.Cache.CurrWrinklerCount+(1-.05*CM.Cache.CurrWrinklerCount)):Game.cookiesPs*(CM.Cache.CurrWrinklerCPSMult/CM.Cache.CurrWrinklerCount+(1-.05*CM.Cache.CurrWrinklerCount))},CM.Disp.CalculateGrimoireRefillTime=function(e,t,o){let i=0;for(;e<o;)e+=.002*Math.max(.002,(e/Math.max(t,100))**.5),i++;return i/Game.fps},CM.Disp.GetLumpColor=function(e){return 0===e?{text:"Normal",color:CM.Disp.colorGray}:1===e?{text:"Bifurcated",color:CM.Disp.colorGreen}:2===e?{text:"Golden",color:CM.Disp.colorYellow}:3===e?{text:"Meaty",color:CM.Disp.colorOrange}:4===e?{text:"Caramelized",color:CM.Disp.colorPurple}:{text:"Unknown Sugar Lump",color:CM.Disp.colorRed}},CM.Disp.UpdateAscendState=function(){Game.OnAscend?(l("game").style.bottom="0px",1===CM.Options.BotBar&&(CM.Disp.BotBar.style.display="none"),1===CM.Options.TimerBar&&(CM.Disp.TimerBar.style.display="none")):(CM.Disp.ToggleBotBar(),CM.Disp.ToggleTimerBar()),CM.Disp.UpdateBackground()},CM.Disp.CreateCssArea=function(){CM.Disp.Css=document.createElement("style"),CM.Disp.Css.type="text/css",document.head.appendChild(CM.Disp.Css)},CM.Disp.UpdateBuildingUpgradeStyle=function(){l("products").style.display="grid",l("storeBulk").style.gridRow="1/1",l("upgrades").style.display="flex",l("upgrades").style["flex-wrap"]="wrap"},CM.Disp.UpdateBackground=function(){Game.Background.canvas.width=Game.Background.canvas.parentNode.offsetWidth,Game.Background.canvas.height=Game.Background.canvas.parentNode.offsetHeight,Game.LeftBackground.canvas.width=Game.LeftBackground.canvas.parentNode.offsetWidth,Game.LeftBackground.canvas.height=Game.LeftBackground.canvas.parentNode.offsetHeight},CM.Disp.Draw=function(){if(Game.prefs.autosave&&Game.drawT%10==0&&"stats"===Game.onMenu&&CM.Options.Stats){const e=document.getElementById("CMStatsAutosaveTimer");e&&(e.innerText=Game.sayTime(60*Game.fps-Game.T%(60*Game.fps),4))}CM.Disp.UpdateBuildings(),CM.Disp.UpdateUpgrades(),CM.Disp.UpdateTimerBar(),CM.Disp.UpdateBotBar(),CM.Disp.UpdateTooltip(),CM.Disp.CheckWrinklerTooltip(),CM.Disp.UpdateWrinklerTooltip(),CM.Disp.RefreshMenu()},CM.Disp.ToggleBotBar=function(){1===CM.Options.BotBar?(CM.Disp.BotBar.style.display="",CM.Footer.isInitzializing||CM.Disp.UpdateBotBar()):CM.Disp.BotBar.style.display="none",CM.Disp.UpdateBotTimerBarPosition()},CM.Disp.CreateBotBar=function(){CM.Disp.BotBar=document.createElement("div"),CM.Disp.BotBar.id="CMBotBar",CM.Disp.BotBar.style.height="69px",CM.Disp.BotBar.style.width="100%",CM.Disp.BotBar.style.position="absolute",CM.Disp.BotBar.style.display="none",CM.Disp.BotBar.style.backgroundColor="#262224",CM.Disp.BotBar.style.backgroundImage="linear-gradient(to bottom, #4d4548, #000000)",CM.Disp.BotBar.style.borderTop="1px solid black",CM.Disp.BotBar.style.overflow="auto",CM.Disp.BotBar.style.textShadow="-1px 0 black, 0 1px black, 1px 0 black, 0 -1px black";const e=CM.Disp.BotBar.appendChild(document.createElement("table"));e.style.width="100%",e.style.textAlign="center",e.style.whiteSpace="nowrap";const t=e.appendChild(document.createElement("tbody")),o=function(e,t){const o=document.createElement("td");return o.style.textAlign="right",o.className=CM.Disp.colorTextPre+t,o.textContent=e,o},i=t.appendChild(document.createElement("tr"));i.style.fontWeight="bold",i.appendChild(o(`CM ${CM.VersionMajor}.${CM.VersionMinor}`,CM.Disp.colorYellow)),t.appendChild(document.createElement("tr")).appendChild(o("Bonus Income",CM.Disp.colorBlue)),t.appendChild(document.createElement("tr")).appendChild(o("Payback Period",CM.Disp.colorBlue)),t.appendChild(document.createElement("tr")).appendChild(o("Time Left",CM.Disp.colorBlue));for(const e of Object.keys(Game.Objects))CM.Disp.CreateBotBarBuildingColumn(e);l("wrapper").appendChild(CM.Disp.BotBar)},CM.Disp.UpdateBotBar=function(){if(1===CM.Options.BotBar&&CM.Cache.Objects1&&1===Game.buyMode){let t=0;for(const o of Object.keys(CM.Cache.Objects1)){let i=`Objects${Game.buyBulk}`;1===Game.buyMode?CM.Disp.LastTargetBotBar=i:i=CM.Disp.LastTargetBotBar,t++,CM.Disp.BotBar.firstChild.firstChild.childNodes[0].childNodes[t].childNodes[1].textContent=Game.Objects[o].amount,CM.Disp.BotBar.firstChild.firstChild.childNodes[1].childNodes[t].textContent=e(CM.Cache[i][o].bonus,2),CM.Disp.BotBar.firstChild.firstChild.childNodes[2].childNodes[t].className=CM.Disp.colorTextPre+CM.Cache[i][o].color,CM.Disp.BotBar.firstChild.firstChild.childNodes[2].childNodes[t].textContent=e(CM.Cache[i][o].pp,2);const n=CM.Disp.GetTimeColor((Game.Objects[o].bulkPrice-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS());CM.Disp.BotBar.firstChild.firstChild.childNodes[3].childNodes[t].className=CM.Disp.colorTextPre+n.color,"Done!"===n.text&&Game.cookies<Game.Objects[o].bulkPrice?CM.Disp.BotBar.firstChild.firstChild.childNodes[3].childNodes[t].textContent=`${n.text} (with Wrink)`:CM.Disp.BotBar.firstChild.firstChild.childNodes[3].childNodes[t].textContent=n.text}}},CM.Disp.CreateBotBarBuildingColumn=function(e){if(!CM.Disp.BotBar)return void CM.Disp.CreateBotBar();const t=CM.Disp.BotBar.firstChild.firstChild.childNodes[0],o=CM.Disp.BotBar.firstChild.firstChild.childNodes[1],i=CM.Disp.BotBar.firstChild.firstChild.childNodes[2],n=CM.Disp.BotBar.firstChild.firstChild.childNodes[3],a=e,s=t.appendChild(document.createElement("td"));s.appendChild(document.createTextNode(`${-1!==a.indexOf(" ")?a.substring(0,a.indexOf(" ")):a} (`)),s.appendChild(document.createElement("span")).className=CM.Disp.colorTextPre+CM.Disp.colorBlue,s.appendChild(document.createTextNode(")")),o.appendChild(document.createElement("td")),i.appendChild(document.createElement("td")),n.appendChild(document.createElement("td"))},CM.Disp.CreateTimerBar=function(){CM.Disp.TimerBar=document.createElement("div"),CM.Disp.TimerBar.id="CMTimerBar",CM.Disp.TimerBar.style.position="absolute",CM.Disp.TimerBar.style.display="none",CM.Disp.TimerBar.style.height="0px",CM.Disp.TimerBar.style.fontSize="10px",CM.Disp.TimerBar.style.fontWeight="bold",CM.Disp.TimerBar.style.backgroundColor="black",CM.Disp.TimerBars={},CM.Disp.BuffTimerBars={},CM.Disp.TimerBars.CMTimerBarGC=CM.Disp.TimerBarCreateBar("CMTimerBarGC","Next Cookie",[{id:"CMTimerBarGCMinBar",color:CM.Disp.colorGray},{id:"CMTimerBarGCBar",color:CM.Disp.colorPurple}]),CM.Disp.TimerBar.appendChild(CM.Disp.TimerBars.CMTimerBarGC),CM.Disp.TimerBars.CMTimerBarRen=CM.Disp.TimerBarCreateBar("CMTimerBarRen","Next Reindeer",[{id:"CMTimerBarRenMinBar",color:CM.Disp.colorGray},{id:"CMTimerBarRenBar",color:CM.Disp.colorOrange}]),CM.Disp.TimerBar.appendChild(CM.Disp.TimerBars.CMTimerBarRen),l("wrapper").appendChild(CM.Disp.TimerBar)},CM.Disp.TimerBarCreateBar=function(e,t,o){const i=document.createElement("div");i.id="CMTimerBar",i.style.height="12px",i.style.margin="0px 10px",i.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="10px",n.style.margin="auto",n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.right="0px",n.style.bottom="0px";const a=document.createElement("span");a.style.display="inline-block",a.style.textAlign="right",a.style.fontSize="10px",a.style.width="108px",a.style.marginRight="5px",a.style.verticalAlign="text-top",a.textContent=t,n.appendChild(a);for(let e=0;e<o.length;e++){const t=document.createElement("span");t.id=o[e].id,t.style.display="inline-block",t.style.height="10px",t.style.verticalAlign="text-top",t.style.textAlign="center",o.length-1===e&&(t.style.borderTopRightRadius="10px",t.style.borderBottomRightRadius="10px"),void 0!==o[e].color&&(t.className=CM.Disp.colorBackPre+o[e].color),n.appendChild(t)}const s=document.createElement("span");return s.id=`${e}Time`,s.style.marginLeft="5px",s.style.verticalAlign="text-top",n.appendChild(s),i.appendChild(n),i},CM.Disp.UpdateTimerBar=function(){if(1===CM.Options.TimerBar){const e=CM.Disp.TimerBar.offsetWidth-163,t=CM.Disp.TimerBar.offsetWidth-133;let o=0;0!==Game.shimmerTypes.golden.spawned||Game.Has("Golden switch [off]")?CM.Disp.TimerBars.CMTimerBarGC.style.display="none":(CM.Disp.TimerBars.CMTimerBarGC.style.display="",l("CMTimerBarGCMinBar").style.width=`${Math.round(Math.max(0,Game.shimmerTypes.golden.minTime-Game.shimmerTypes.golden.time)*e/Game.shimmerTypes.golden.maxTime)}px`,CM.Options.TimerBarOverlay>=1?l("CMTimerBarGCMinBar").textContent=Math.ceil((Game.shimmerTypes.golden.minTime-Game.shimmerTypes.golden.time)/Game.fps):l("CMTimerBarGCMinBar").textContent="",Game.shimmerTypes.golden.minTime===Game.shimmerTypes.golden.maxTime?(l("CMTimerBarGCMinBar").style.borderTopRightRadius="10px",l("CMTimerBarGCMinBar").style.borderBottomRightRadius="10px"):(l("CMTimerBarGCMinBar").style.borderTopRightRadius="",l("CMTimerBarGCMinBar").style.borderBottomRightRadius=""),l("CMTimerBarGCBar").style.width=`${Math.round(Math.min(Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.minTime,Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.time)*e/Game.shimmerTypes.golden.maxTime)}px`,CM.Options.TimerBarOverlay>=1?l("CMTimerBarGCBar").textContent=Math.ceil(Math.min(Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.minTime,Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.time)/Game.fps):l("CMTimerBarGCBar").textContent="",l("CMTimerBarGCTime").textContent=Math.ceil((Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.time)/Game.fps),o++),"christmas"===Game.season&&0===Game.shimmerTypes.reindeer.spawned?(CM.Disp.TimerBars.CMTimerBarRen.style.display="",l("CMTimerBarRenMinBar").style.width=`${Math.round(Math.max(0,Game.shimmerTypes.reindeer.minTime-Game.shimmerTypes.reindeer.time)*e/Game.shimmerTypes.reindeer.maxTime)}px`,CM.Options.TimerBarOverlay>=1?l("CMTimerBarRenMinBar").textContent=Math.ceil((Game.shimmerTypes.reindeer.minTime-Game.shimmerTypes.reindeer.time)/Game.fps):l("CMTimerBarRenMinBar").textContent="",l("CMTimerBarRenBar").style.width=`${Math.round(Math.min(Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.minTime,Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.time)*e/Game.shimmerTypes.reindeer.maxTime)}px`,CM.Options.TimerBarOverlay>=1?l("CMTimerBarRenBar").textContent=Math.ceil(Math.min(Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.minTime,Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.time)/Game.fps):l("CMTimerBarRenBar").textContent="",l("CMTimerBarRenTime").textContent=Math.ceil((Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.time)/Game.fps),o++):CM.Disp.TimerBars.CMTimerBarRen.style.display="none";for(const e of Object.keys(CM.Disp.BuffTimerBars))CM.Disp.BuffTimerBars[e].remove();CM.Disp.BuffTimerBars={};for(const e of Object.keys(Game.buffs))if(Game.buffs[e]){const i=CM.Disp.TimerBarCreateBar(Game.buffs[e].name,Game.buffs[e].name,[{id:`${Game.buffs[e].name}Bar`}]);i.style.display="";let n="";n=void 0!==CM.Disp.buffColors[Game.buffs[e].name]?CM.Disp.buffColors[Game.buffs[e].name]:CM.Disp.colorPurple,i.lastChild.children[1].className=CM.Disp.colorBackPre+n,i.lastChild.children[1].style.color="black",2===CM.Options.TimerBarOverlay?i.lastChild.children[1].textContent=`${Math.round(Game.buffs[e].time/Game.buffs[e].maxTime*100)}%`:i.lastChild.children[1].textContent="",i.lastChild.children[1].style.width=`${Math.round(Game.buffs[e].time*(t-8*Math.ceil(Game.buffs[e].time/Game.fps).toString().length)/Game.buffs[e].maxTime)}px`,i.lastChild.children[2].textContent=Math.ceil(Game.buffs[e].time/Game.fps),o++,CM.Disp.BuffTimerBars[Game.buffs[e].name]=i}for(const e of Object.keys(CM.Disp.BuffTimerBars))CM.Disp.TimerBar.appendChild(CM.Disp.BuffTimerBars[e]);0!==o&&(CM.Disp.TimerBar.style.height=12*o+2+"px"),CM.Disp.LastNumberOfTimers!==o&&(CM.Disp.LastNumberOfTimers=o,CM.Disp.UpdateBotTimerBarPosition())}},CM.Disp.ToggleTimerBar=function(){1===CM.Options.TimerBar?CM.Disp.TimerBar.style.display="":CM.Disp.TimerBar.style.display="none",CM.Disp.UpdateBotTimerBarPosition()},CM.Disp.ToggleTimerBarPos=function(){0===CM.Options.TimerBarPos?(CM.Disp.TimerBar.style.width="30%",CM.Disp.TimerBar.style.bottom="",l("game").insertBefore(CM.Disp.TimerBar,l("sectionLeft"))):(CM.Disp.TimerBar.style.width="100%",CM.Disp.TimerBar.style.bottom="0px",l("wrapper").appendChild(CM.Disp.TimerBar)),CM.Disp.UpdateBotTimerBarPosition()},CM.Disp.UpdateBotTimerBarPosition=function(){1===CM.Options.BotBar&&1===CM.Options.TimerBar&&1===CM.Options.TimerBarPos?(CM.Disp.BotBar.style.bottom=CM.Disp.TimerBar.style.height,l("game").style.bottom=`${Number(CM.Disp.TimerBar.style.height.replace("px",""))+70}px`):1===CM.Options.BotBar?(CM.Disp.BotBar.style.bottom="0px",l("game").style.bottom="70px"):1===CM.Options.TimerBar&&1===CM.Options.TimerBarPos?l("game").style.bottom=CM.Disp.TimerBar.style.height:l("game").style.bottom="0px",1===CM.Options.TimerBar&&0===CM.Options.TimerBarPos?l("sectionLeft").style.top=CM.Disp.TimerBar.style.height:l("sectionLeft").style.top="",CM.Disp.UpdateBackground()},CM.Disp.UpdateBuildings=function(){let t=`Objects${Game.buyBulk}`;if(1===Game.buyMode?CM.Disp.LastTargetBuildings=t:t=CM.Disp.LastTargetBuildings,1===Game.buyMode)if(1===CM.Options.BuildColor)for(const e of Object.keys(CM.Cache[t]))l(`productPrice${Game.Objects[e].id}`).style.color=CM.Options.Colors[CM.Cache[t][e].color];else for(const e of Object.keys(Game.Objects))l(`productPrice${Game.Objects[e].id}`).style.removeProperty("color");else if(-1===Game.buyMode)for(const t of Object.keys(CM.Cache.Objects1)){const o=Game.Objects[t];l(`productPrice${o.id}`).style.color="",l(`productPrice${o.id}`).innerHTML=e(CM.Sim.BuildingSell(o,o.basePrice,o.amount,o.free,Game.buyBulk,1))}if(1===Game.buyMode&&CM.Options.SortBuildings){const e=Object.keys(CM.Cache[t]).map((e=>{const o=CM.Cache[t][e];return o.name=e,o.id=Game.Objects[e].id,o}));e.sort((function(e,t){return CM.Disp.colors.indexOf(e.color)>CM.Disp.colors.indexOf(t.color)?1:CM.Disp.colors.indexOf(e.color)<CM.Disp.colors.indexOf(t.color)||e.pp<t.pp?-1:0}));for(let t=0;t<e.length;t++)Game.Objects[e[t].name].l.style.gridRow=`${t+2}/${t+2}`}else{const e=Object.keys(CM.Cache.Objects1).map((e=>{const t=CM.Cache.Objects1[e];return t.name=e,t.id=Game.Objects[e].id,t}));e.sort(((e,t)=>e.id-t.id));for(let t=0;t<e.length;t++)Game.Objects[e[t].name].l.style.gridRow=`${t+2}/${t+2}`}},CM.Disp.UpdateUpgrades=function(){if(CM.Options.UpBarColor>0){let e=0,t=0,o=0,i=0,n=0,a=0,s=0;for(const r of Object.keys(Game.UpgradesInStore)){const p=Game.UpgradesInStore[r];let C=!1;for(let e=0;e<l(`upgrade${r}`).childNodes.length;e++)if(-1!==l(`upgrade${r}`).childNodes[e].className.indexOf(CM.Disp.colorBackPre)){l(`upgrade${r}`).childNodes[e].className=CM.Disp.colorBackPre+CM.Cache.Upgrades[p.name].color,C=!0;break}if(!C){const e=document.createElement("div");e.style.width="10px",e.style.height="10px",e.className=CM.Disp.colorBackPre+CM.Cache.Upgrades[p.name].color,l(`upgrade${r}`).appendChild(e)}CM.Cache.Upgrades[p.name].color===CM.Disp.colorBlue?e++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorGreen?t++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorYellow?o++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorOrange?i++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorRed?n++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorPurple?a++:CM.Cache.Upgrades[p.name].color===CM.Disp.colorGray&&s++}l("CMUpgradeBarBlue").textContent=e,l("CMUpgradeBarGreen").textContent=t,l("CMUpgradeBarYellow").textContent=o,l("CMUpgradeBarOrange").textContent=i,l("CMUpgradeBarRed").textContent=n,l("CMUpgradeBarPurple").textContent=a,l("CMUpgradeBarGray").textContent=s}const e=[];for(let t=0;t<Game.UpgradesInStore.length;t++){const o={};o.name=Game.UpgradesInStore[t].name,o.price=Game.UpgradesInStore[t].basePrice,o.pp=CM.Cache.Upgrades[o.name].pp,e.push(o)}CM.Options.SortUpgrades?e.sort((function(e,t){return CM.Disp.colors.indexOf(e.color)>CM.Disp.colors.indexOf(t.color)?1:CM.Disp.colors.indexOf(e.color)<CM.Disp.colors.indexOf(t.color)||e.pp<t.pp?-1:0})):e.sort(((e,t)=>e.price-t.price));const t=function(e,t){return e.findIndex((e=>e.name===t.name))};for(let o=0;o<Game.UpgradesInStore.length;o++)l(`upgrade${o}`).style.order=t(e,Game.UpgradesInStore[o])+1},CM.Disp.ToggleUpgradeBarAndColor=function(){1===CM.Options.UpBarColor?(CM.Disp.UpgradeBar.style.display="",CM.Disp.UpdateUpgrades()):2===CM.Options.UpBarColor?(CM.Disp.UpgradeBar.style.display="none",CM.Disp.UpdateUpgrades()):(CM.Disp.UpgradeBar.style.display="none",Game.RebuildUpgrades())},CM.Disp.ToggleUpgradeBarFixedPos=function(){1===CM.Options.UpgradeBarFixedPos?(CM.Disp.UpgradeBar.style.position="sticky",CM.Disp.UpgradeBar.style.top="0px"):CM.Disp.UpgradeBar.style.position=""},CM.Disp.CreateUpgradeBar=function(){CM.Disp.UpgradeBar=document.createElement("div"),CM.Disp.UpgradeBar.id="CMUpgradeBar",CM.Disp.UpgradeBar.style.width="100%",CM.Disp.UpgradeBar.style.backgroundColor="black",CM.Disp.UpgradeBar.style.textAlign="center",CM.Disp.UpgradeBar.style.fontWeight="bold",CM.Disp.UpgradeBar.style.display="none",CM.Disp.UpgradeBar.style.zIndex="21",CM.Disp.UpgradeBar.onmouseout=function(){Game.tooltip.hide()};const e=document.createElement("div");e.appendChild(CM.Disp.CreateUpgradeBarLegend()),CM.Disp.UpgradeBar.onmouseover=function(){Game.tooltip.draw(this,escape(e.innerHTML),"store")};const t=function(e,t){const o=document.createElement("span");return o.id=e,o.className=CM.Disp.colorTextPre+t,o.style.width="14.28571428571429%",o.style.display="inline-block",o.textContent="0",o};CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarBlue",CM.Disp.colorBlue)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarGreen",CM.Disp.colorGreen)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarYellow",CM.Disp.colorYellow)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarOrange",CM.Disp.colorOrange)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarRed",CM.Disp.colorRed)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarPurple",CM.Disp.colorPurple)),CM.Disp.UpgradeBar.appendChild(t("CMUpgradeBarGray",CM.Disp.colorGray)),l("upgrades").parentNode.insertBefore(CM.Disp.UpgradeBar,l("upgrades").parentNode.childNodes[3])},CM.Disp.CreateUpgradeBarLegend=function(){const e=document.createElement("div");e.style.minWidth="330px",e.style.marginBottom="4px";const t=document.createElement("div");t.className="name",t.style.marginBottom="4px",t.textContent="Legend",e.appendChild(t);const o=function(e,t){const o=document.createElement("div");o.style.verticalAlign="middle";const i=document.createElement("span");return i.className=CM.Disp.colorBackPre+e,i.style.display="inline-block",i.style.height="10px",i.style.width="10px",i.style.marginRight="4px",o.appendChild(i),o.appendChild(document.createTextNode(t)),o};return e.appendChild(o(CM.Disp.colorBlue,"Better than best PP building")),e.appendChild(o(CM.Disp.colorGreen,"Same as best PP building")),e.appendChild(o(CM.Disp.colorYellow,"Between best and worst PP buildings closer to best")),e.appendChild(o(CM.Disp.colorOrange,"Between best and worst PP buildings closer to worst")),e.appendChild(o(CM.Disp.colorRed,"Same as worst PP building")),e.appendChild(o(CM.Disp.colorPurple,"Worse than worst PP building")),e.appendChild(o(CM.Disp.colorGray,"Negative or infinity PP")),e},CM.Disp.CreateWhiteScreen=function(){CM.Disp.WhiteScreen=document.createElement("div"),CM.Disp.WhiteScreen.id="CMWhiteScreen",CM.Disp.WhiteScreen.style.width="100%",CM.Disp.WhiteScreen.style.height="100%",CM.Disp.WhiteScreen.style.backgroundColor="white",CM.Disp.WhiteScreen.style.display="none",CM.Disp.WhiteScreen.style.zIndex="9999999999",CM.Disp.WhiteScreen.style.position="absolute",l("wrapper").appendChild(CM.Disp.WhiteScreen)},CM.Disp.Flash=function(e,t){1===CM.Options[t]&&3===e&&!1===CM.Footer.isInitzializing||1===e?(CM.Disp.WhiteScreen.style.opacity="0.5",3===e?(CM.Disp.WhiteScreen.style.display="inline",setTimeout((function(){CM.Disp.Flash(2,t)}),1e3/Game.fps)):setTimeout((function(){CM.Disp.Flash(0,t)}),1e3/Game.fps)):2===e?(CM.Disp.WhiteScreen.style.opacity="1",setTimeout((function(){CM.Disp.Flash(1,t)}),1e3/Game.fps)):0===e&&(CM.Disp.WhiteScreen.style.display="none")},CM.Disp.PlaySound=function(e,t,o){if(1===CM.Options[t]&&!1===CM.Footer.isInitzializing){const t=new realAudio(e);CM.Options.GeneralSound?t.volume=CM.Options[o]/100*(Game.volume/100):t.volume=CM.Options[o]/100,t.play()}},CM.Disp.Notification=function(e,t,o){1===CM.Options[e]&&"hidden"===document.visibilityState&&!1===CM.Footer.isInitzializing&&new Notification(t,{body:o,badge:"https://orteil.dashnet.org/cookieclicker/favicon.ico"})},CM.Disp.CreateFavicon=function(){CM.Disp.Favicon=document.createElement("link"),CM.Disp.Favicon.id="CMFavicon",CM.Disp.Favicon.rel="shortcut icon",CM.Disp.Favicon.href="https://orteil.dashnet.org/cookieclicker/favicon.ico",document.getElementsByTagName("head")[0].appendChild(CM.Disp.Favicon)},CM.Disp.UpdateFavicon=function(){1===CM.Options.Favicon&&CM.Main.lastGoldenCookieState>0?CM.Cache.spawnedGoldenShimmer.wrath?CM.Disp.Favicon.href="https://aktanusa.github.io/CookieMonster/favicon/wrathCookie.ico":CM.Disp.Favicon.href="https://aktanusa.github.io/CookieMonster/favicon/goldenCookie.ico":CM.Disp.Favicon.href="https://orteil.dashnet.org/cookieclicker/favicon.ico"},CM.Disp.UpdateTitle=function(){if(Game.OnAscend||0===CM.Options.Title)document.title=CM.Disp.Title;else if(1===CM.Options.Title){let e,t,o,i=!1,n=!1;e=CM.Cache.spawnedGoldenShimmer?CM.Cache.spawnedGoldenShimmer.wrath?`[W${Math.ceil(CM.Cache.spawnedGoldenShimmer.life/Game.fps)}]`:`[G${Math.ceil(CM.Cache.spawnedGoldenShimmer.life/Game.fps)}]`:Game.Has("Golden switch [off]")?"[GS]":`[${Number(l("CMTimerBarGCMinBar").textContent)<0?"!":""}${Math.ceil((Game.shimmerTypes.golden.maxTime-Game.shimmerTypes.golden.time)/Game.fps)}]`,CM.Main.lastTickerFortuneState&&(i=!0,t="[F]"),"christmas"===Game.season&&(n=!0,o=CM.Main.lastSeasonPopupState?`[R${Math.ceil(CM.Cache.seasonPopShimmer.life/Game.fps)}]`:`[${Number(l("CMTimerBarRenMinBar").textContent)<0?"!":""}${Math.ceil((Game.shimmerTypes.reindeer.maxTime-Game.shimmerTypes.reindeer.time)/Game.fps)}]`);let a=CM.Disp.Title;"["===a.charAt(0)&&(a=a.substring(a.lastIndexOf("]")+1)),document.title=`${e+(i?t:"")+(n?o:"")} ${a}`}else if(2===CM.Options.Title){let e="",t=!1;CM.Cache.spawnedGoldenShimmer&&(t=!0,CM.Cache.spawnedGoldenShimmer.wrath?e+=`[W${Math.ceil(CM.Cache.spawnedGoldenShimmer.life/Game.fps)}]`:e+=`[G${Math.ceil(CM.Cache.spawnedGoldenShimmer.life/Game.fps)}]`),CM.Main.lastTickerFortuneState&&(t=!0,e+="[F]"),"christmas"===Game.season&&CM.Main.lastSeasonPopupState&&(e+=`[R${Math.ceil(CM.Cache.seasonPopShimmer.life/Game.fps)}]`,t=!0),t&&(e+=" - ");let o="Cookie Clicker";"fools"===Game.season&&(o="Cookie Baker"),e+=o,document.title=e}},CM.Disp.CreateGCTimer=function(e){const t=document.createElement("div");t.id=`GCTimer${e.id}`,t.style.width="96px",t.style.height="96px",t.style.position="absolute",t.style.zIndex="10000000001",t.style.textAlign="center",t.style.lineHeight="96px",t.style.fontFamily='"Kavoon", Georgia, serif',t.style.fontSize="35px",t.style.cursor="pointer",t.style.display="block",0===CM.Options.GCTimer&&(t.style.display="none"),t.style.left=e.l.style.left,t.style.top=e.l.style.top,t.onclick=function(){e.pop()},t.onmouseover=function(){e.l.style.filter="brightness(125%) drop-shadow(0px 0px 3px rgba(255,255,255,1))",e.l.style.webkitFilter="brightness(125%) drop-shadow(0px 0px 3px rgba(255,255,255,1))"},t.onmouseout=function(){e.l.style.filter="",e.l.style.webkitFilter=""},CM.Disp.GCTimers[e.id]=t,l("shimmers").appendChild(t)},CM.Disp.ToggleGCTimer=function(){if(1===CM.Options.GCTimer)for(const e of Object.keys(CM.Disp.GCTimers))CM.Disp.GCTimers[e].style.display="block",CM.Disp.GCTimers[e].style.left=CM.Cache.goldenShimmersByID[e].l.style.left,CM.Disp.GCTimers[e].style.top=CM.Cache.goldenShimmersByID[e].l.style.top;else for(const e of Object.keys(CM.Disp.GCTimers))CM.Disp.GCTimers[e].style.display="none"},CM.Disp.AddAuraInfo=function(e){if(1===CM.Options.DragonAuraInfo){const[t,o]=CM.Sim.CalculateChangeAura(e),i=CM.Disp.FormatTime(o/(t+Game.cookiesPs)),n=CM.Disp.Beautify(t/Game.cookiesPs);l("dragonAuraInfo").style.minHeight="60px",l("dragonAuraInfo").style.margin="8px",l("dragonAuraInfo").appendChild(document.createElement("div")).className="line";const a=document.createElement("div");a.style.minWidth="200px",a.style.textAlign="center",a.textContent=`Picking this aura will change CPS by ${CM.Disp.Beautify(t)} (${n}% of current CPS).`,l("dragonAuraInfo").appendChild(a);const s=document.createElement("div");s.style.minWidth="200px",s.style.textAlign="center",s.textContent=`It will take ${i} to recover the cost.`,l("dragonAuraInfo").appendChild(s)}},CM.Disp.AddDragonLevelUpTooltip=function(){if(null!==(l("specialPopup").className.match(/onScreen/)&&l("specialPopup").children[0].style.background.match(/dragon/)))for(let e=0;e<l("specialPopup").childNodes.length;e++)"optionBox"===l("specialPopup").childNodes[e].className&&(l("specialPopup").children[e].onmouseover=function(){CM.Cache.CacheDragonCost(),Game.tooltip.dynamic=1,Game.tooltip.draw(l("specialPopup"),`<div style="min-width:200px;text-align:center;">${CM.Cache.CostDragonUpgrade}</div>`,"this"),Game.tooltip.wobble()},l("specialPopup").children[e].onmouseout=function(){Game.tooltip.shouldHide=1})},CM.Disp.AddMenu=function(){const e=document.createElement("div");e.className="title","prefs"===Game.onMenu?(e.textContent="Cookie Monster Settings",CM.Disp.AddMenuPref(e)):"stats"===Game.onMenu?CM.Options.Stats&&(e.textContent="Cookie Monster Statistics",CM.Disp.AddMenuStats(e)):"log"===Game.onMenu&&(e.textContent="Cookie Monster ",CM.Disp.AddMenuInfo(e))},CM.Disp.RefreshMenu=function(){CM.Options.UpStats&&"stats"===Game.onMenu&&(Game.drawT-1)%(5*Game.fps)!=0&&(Game.drawT-1)%Game.fps==0&&Game.UpdateMenu()},CM.Disp.AddMenuPref=function(e){const t=document.createDocumentFragment();t.appendChild(e);for(const e of Object.keys(CM.Data.ConfigGroups)){const o=CM.Disp.CreatePrefHeader(e,CM.Data.ConfigGroups[e]);if(t.appendChild(o),CM.Options.Header[e])if("Notification"===e)for(const e of Object.keys(CM.Data.ConfigGroupsNotification)){const o=CM.Disp.CreatePrefHeader(e,CM.Data.ConfigGroupsNotification[e]);if(o.style.fontSize="15px",o.style.opacity="0.5",t.appendChild(o),CM.Options.Header[e])for(const o in CM.Data.Config)CM.Data.Config[o].group===e&&t.appendChild(CM.Disp.CreatePrefOption(o))}else for(const o of Object.keys(CM.Data.Config))CM.Data.Config[o].group===e&&t.appendChild(CM.Disp.CreatePrefOption(o))}const o=document.createElement("div");o.className="listing";const i=document.createElement("a");i.className="option",i.onclick=function(){CM.Config.RestoreDefault()},i.textContent="Restore Default",o.appendChild(i),t.appendChild(o),l("menu").childNodes[2].insertBefore(t,l("menu").childNodes[2].childNodes[l("menu").childNodes[2].childNodes.length-1])},CM.Disp.CreatePrefHeader=function(e,t){const o=document.createElement("div");o.className="title",o.style.opacity="0.7",o.style.fontSize="17px",o.appendChild(document.createTextNode(`${t} `));const i=document.createElement("span");return i.style.cursor="pointer",i.style.display="inline-block",i.style.height="14px",i.style.width="14px",i.style.borderRadius="7px",i.style.textAlign="center",i.style.backgroundColor="#C0C0C0",i.style.color="black",i.style.fontSize="13px",i.style.verticalAlign="middle",i.textContent=CM.Options.Header[e]?"-":"+",i.onclick=function(){CM.Config.ToggleHeader(e),Game.UpdateMenu()},o.appendChild(i),o},CM.Disp.CreatePrefOption=function(e){const t=document.createElement("div");if(t.className="listing","bool"===CM.Data.Config[e].type){const o=document.createElement("a");CM.Data.Config[e].toggle&&0===CM.Options[e]?o.className="option off":o.className="option",o.id=CM.Config.ConfigPrefix+e,o.onclick=function(){CM.Config.ToggleConfig(e)},o.textContent=CM.Data.Config[e].label[CM.Options[e]],t.appendChild(o);const i=document.createElement("label");return i.textContent=CM.Data.Config[e].desc,t.appendChild(i),t}if("vol"===CM.Data.Config[e].type){const o=document.createElement("div");o.className="sliderBox";const i=document.createElement("div");i.style.float="left",i.innerHTML=CM.Data.Config[e].desc,o.appendChild(i);const n=document.createElement("div");n.id=`slider${e}right`,n.style.float="right",n.innerHTML=`${CM.Options[e]}%`,o.appendChild(n);const a=document.createElement("input");return a.className="slider",a.id=`slider${e}`,a.style.clear="both",a.type="range",a.min="0",a.max="100",a.step="1",a.value=CM.Options[e],a.oninput=function(){CM.Config.ToggleConfigVolume(e)},a.onchange=function(){CM.Config.ToggleConfigVolume(e)},o.appendChild(a),t.appendChild(o),t}if("url"===CM.Data.Config[e].type){const o=document.createElement("span");o.className="option",o.textContent=`${CM.Data.Config[e].label} `,t.appendChild(o);const i=document.createElement("input");i.id=CM.Config.ConfigPrefix+e,i.className="option",i.type="text",i.readOnly=!0,i.setAttribute("value",CM.Options[e]),i.style.width="300px",t.appendChild(i),t.appendChild(document.createTextNode(" "));const n=document.createElement("input");n.id=`${CM.Config.ConfigPrefix+e}Prompt`,n.className="option",n.type="text",n.setAttribute("value",CM.Options[e]);const a=document.createElement("a");a.className="option",a.onclick=function(){Game.Prompt(n.outerHTML,[["Save",`CM.Options['${e}'] = l(CM.Config.ConfigPrefix + '${e}' + 'Prompt').value; CM.Config.SaveConfig(); Game.ClosePrompt(); Game.UpdateMenu();`],"Cancel"])},a.textContent="Edit",t.appendChild(a);const s=document.createElement("label");return s.textContent=CM.Data.Config[e].desc,t.appendChild(s),t}if("color"===CM.Data.Config[e].type){t.className="";for(let e=0;e<CM.Disp.colors.length;e++){const o=document.createElement("div");o.className="listing";const i=document.createElement("input");i.id=CM.Disp.colors[e],i.style.width="65px",i.setAttribute("value",CM.Options.Colors[CM.Disp.colors[e]]),o.appendChild(i),new JSColor(i,{hash:!0,position:"right",onInput:function(){CM.Options.Colors[this.targetElement.id]=this.toHEXString(),CM.Disp.UpdateColors(),CM.Config.SaveConfig(),Game.UpdateMenu()}});const n=document.createElement("label");n.textContent=CM.Data.Config.Colors.desc[CM.Disp.colors[e]],o.appendChild(n),t.appendChild(o)}return t}if("numscale"===CM.Data.Config[e].type){const o=document.createElement("span");o.className="option",o.textContent=`${CM.Data.Config[e].label} `,t.appendChild(o);const i=document.createElement("input");i.id=CM.Config.ConfigPrefix+e,i.className="option",i.type="number",i.value=CM.Options[e],i.min=CM.Data.Config[e].min,i.max=CM.Data.Config[e].max,i.oninput=function(){this.value>this.max&&console.log("TEST"),CM.Options[e]=this.value,CM.Config.SaveConfig(),CM.Disp.RefreshScale()},t.appendChild(i),t.appendChild(document.createTextNode(" "));const n=document.createElement("label");return n.textContent=CM.Data.Config[e].desc,t.appendChild(n),t}return t},CM.Disp.ToggleDetailedTime=function(){1===CM.Options.DetailedTime?Game.sayTime=CM.Disp.sayTime:Game.sayTime=CM.Backup.sayTime},CM.Disp.RefreshScale=function(){BeautifyAll(),Game.RefreshStore(),Game.RebuildUpgrades(),CM.Disp.UpdateBotBar(),CM.Disp.UpdateBuildings(),CM.Disp.UpdateUpgrades()},CM.Disp.UpdateColors=function(){let e="";for(let t=0;t<CM.Disp.colors.length;t++)e+=`.${CM.Disp.colorTextPre}${CM.Disp.colors[t]} { color: ${CM.Options.Colors[CM.Disp.colors[t]]}; }\n`;for(let t=0;t<CM.Disp.colors.length;t++)e+=`.${CM.Disp.colorBackPre}${CM.Disp.colors[t]} { background-color: ${CM.Options.Colors[CM.Disp.colors[t]]}; }\n`;for(let t=0;t<CM.Disp.colors.length;t++)e+=`.${CM.Disp.colorBorderPre}${CM.Disp.colors[t]} { border: 1px solid ${CM.Options.Colors[CM.Disp.colors[t]]}; }\n`;CM.Disp.Css.textContent=e,CM.Disp.UpdateBuildings()},CM.Disp.AddMenuStats=function(t){const o=document.createElement("div");if(o.className="subsection",o.appendChild(t),o.appendChild(CM.Disp.CreateStatsHeader("Lucky Cookies","Lucky")),CM.Options.Header.Lucky&&o.appendChild(CM.Disp.CreateStatsLuckySection()),o.appendChild(CM.Disp.CreateStatsHeader("Chain Cookies","Chain")),CM.Options.Header.Chain&&o.appendChild(CM.Disp.CreateStatsChainSection()),Game.Objects["Wizard tower"].minigameLoaded&&(o.appendChild(CM.Disp.CreateStatsHeader("Spells","Spells")),CM.Options.Header.Spells&&o.appendChild(CM.Disp.CreateStatsSpellsSection())),Game.Objects.Farm.minigameLoaded&&(o.appendChild(CM.Disp.CreateStatsHeader("Garden","Garden")),CM.Options.Header.Garden&&o.appendChild(CM.Disp.CreateStatsGardenSection())),o.appendChild(CM.Disp.CreateStatsHeader("Prestige","Prestige")),CM.Options.Header.Prestige&&o.appendChild(CM.Disp.CreateStatsPrestigeSection()),Game.cpsSucked>0&&(o.appendChild(CM.Disp.CreateStatsHeader("Wrinklers","Wrink")),CM.Options.Header.Wrink)){const t=document.createDocumentFragment();t.appendChild(document.createTextNode(`${e(CM.Cache.WrinklersTotal)} / ${e(CM.Cache.WrinklersNormal)} `));const i=document.createElement("a");i.textContent="Pop All Normal",i.className="option",i.onclick=function(){CM.Disp.PopAllNormalWrinklers()},t.appendChild(i),o.appendChild(CM.Disp.CreateStatsListing("basic","Rewards of Popping (All/Normal)",t));const n=document.createDocumentFragment();n.appendChild(document.createTextNode(`${e(CM.Cache.WrinklersFattest[0])} `));const a=document.createElement("a");a.textContent="Pop Single Fattest",a.className="option",a.onclick=function(){null!==CM.Cache.WrinklersFattest[1]&&(Game.wrinklers[CM.Cache.WrinklersFattest[1]].hp=0)},n.appendChild(a),o.appendChild(CM.Disp.CreateStatsListing("basic",`Rewards of Popping Single Fattest Non-Shiny Wrinkler (id: ${null!==CM.Cache.WrinklersFattest[1]?CM.Cache.WrinklersFattest[1]:"None"})`,n))}let i=!1;const n=[];for(const e of Object.keys(CM.Data.HalloCookies))Game.Has(CM.Data.HalloCookies[e])||(n.push(CM.Data.HalloCookies[e]),i=!0);const a=[];for(const e of Object.keys(CM.Data.ChristCookies))Game.Has(CM.Data.ChristCookies[e])||(a.push(CM.Data.ChristCookies[e]),i=!0);const s=[];for(const e of Object.keys(CM.Data.ValCookies))Game.Has(CM.Data.ValCookies[e])||(s.push(CM.Data.ValCookies[e]),i=!0);const r=[];for(const e of Object.keys(Game.eggDrops))Game.HasUnlocked(Game.eggDrops[e])||(r.push(Game.eggDrops[e]),i=!0);const p=[];for(const e of Object.keys(Game.rareEggDrops))Game.HasUnlocked(Game.rareEggDrops[e])||(p.push(Game.rareEggDrops[e]),i=!0);const C=[];for(const e of Object.keys(CM.Data.PlantDrops))Game.HasUnlocked(CM.Data.PlantDrops[e])||(C.push(CM.Data.PlantDrops[e]),i=!0);const c=Game.HasUnlocked("Chocolate egg")&&!Game.Has("Chocolate egg"),d=Game.Has("Century egg");if(("christmas"===Game.season||i||c||d)&&(o.appendChild(CM.Disp.CreateStatsHeader("Season Specials","Sea")),CM.Options.Header.Sea&&(0!==n.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Halloween Cookies Left to Buy",CM.Disp.CreateStatsMissDisp(n))),0!==a.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Christmas Cookies Left to Buy",CM.Disp.CreateStatsMissDisp(a))),0!==s.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Valentine Cookies Left to Buy",CM.Disp.CreateStatsMissDisp(s))),0!==r.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Normal Easter Eggs Left to Unlock",CM.Disp.CreateStatsMissDisp(r))),0!==p.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Rare Easter Eggs Left to Unlock",CM.Disp.CreateStatsMissDisp(p))),0!==C.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Rare Plant Drops Left to Unlock",CM.Disp.CreateStatsMissDisp(C))),"christmas"===Game.season&&o.appendChild(CM.Disp.CreateStatsListing("basic","Reindeer Reward",document.createTextNode(e(CM.Cache.SeaSpec)))),c&&o.appendChild(CM.Disp.CreateStatsListing("withTooltip","Chocolate Egg Cookies",document.createTextNode(e(CM.Cache.lastChoEgg)),"ChoEggTooltipPlaceholder")),d&&o.appendChild(CM.Disp.CreateStatsListing("basic","Century Egg Multiplier",document.createTextNode(Math.round(1e4*(CM.Cache.CentEgg-1))/100+"%"))))),o.appendChild(CM.Disp.CreateStatsHeader("Miscellaneous","Misc")),CM.Options.Header.Misc){if(o.appendChild(CM.Disp.CreateStatsListing("basic",`Average Cookies Per Second (Past ${CM.Disp.cookieTimes[CM.Options.AvgCPSHist]<60?`${CM.Disp.cookieTimes[CM.Options.AvgCPSHist]} seconds`:CM.Disp.cookieTimes[CM.Options.AvgCPSHist]/60+(3===CM.Options.AvgCPSHist?" minute":" minutes")})`,document.createTextNode(e(CM.Disp.GetCPS(),3)))),o.appendChild(CM.Disp.CreateStatsListing("basic",`Average Cookie Clicks Per Second (Past ${CM.Disp.clickTimes[CM.Options.AvgClicksHist]}${0===CM.Options.AvgClicksHist?" second":" seconds"})`,document.createTextNode(e(CM.Cache.AverageClicks,1)))),Game.Has("Fortune cookies")){const e=[];for(const t of Object.keys(CM.Data.Fortunes))Game.Has(CM.Data.Fortunes[t])||e.push(CM.Data.Fortunes[t]);0!==e.length&&o.appendChild(CM.Disp.CreateStatsListing("basic","Fortune Upgrades Left to Buy",CM.Disp.CreateStatsMissDisp(e)))}if(CM.Options.ShowMissedGC&&o.appendChild(CM.Disp.CreateStatsListing("basic","Missed Golden Cookies",document.createTextNode(e(Game.missedGoldenClicks)))),Game.prefs.autosave){const e=document.createElement("span");e.id="CMStatsAutosaveTimer",e.innerText=Game.sayTime(60*Game.fps-(Game.OnAscend?0:Game.T%(60*Game.fps)),4),o.appendChild(CM.Disp.CreateStatsListing("basic","Time till autosave",e))}}l("menu").insertBefore(o,l("menu").childNodes[2]),CM.Options.MissingUpgrades&&CM.Disp.AddMissingUpgrades()},CM.Disp.CreateStatsHeader=function(e,t){const o=document.createElement("div");o.className="title",o.style.padding="0px 16px",o.style.opacity="0.7",o.style.fontSize="17px",o.style.fontFamily='"Kavoon", Georgia, serif',o.appendChild(document.createTextNode(`${e} `));const i=document.createElement("span");return i.style.cursor="pointer",i.style.display="inline-block",i.style.height="14px",i.style.width="14px",i.style.borderRadius="7px",i.style.textAlign="center",i.style.backgroundColor="#C0C0C0",i.style.color="black",i.style.fontSize="13px",i.style.verticalAlign="middle",i.textContent=CM.Options.Header[t]?"-":"+",i.onclick=function(){CM.Config.ToggleHeader(t),Game.UpdateMenu()},o.appendChild(i),o},CM.Disp.CreateStatsListing=function(e,t,o,i){const n=document.createElement("div");n.className="listing";const a=document.createElement("b");if(a.textContent=t,n.appendChild(a),"withTooltip"===e){n.className="listing",n.appendChild(document.createTextNode(" "));const e=document.createElement("span");e.onmouseout=function(){Game.tooltip.hide()},e.onmouseover=function(){Game.tooltip.draw(this,escape(CM.Disp[i].innerHTML))},e.style.cursor="default",e.style.display="inline-block",e.style.height="10px",e.style.width="10px",e.style.borderRadius="5px",e.style.textAlign="center",e.style.backgroundColor="#C0C0C0",e.style.color="black",e.style.fontSize="9px",e.style.verticalAlign="bottom",e.textContent="?",n.appendChild(e)}return n.appendChild(document.createTextNode(": ")),n.appendChild(o),n},CM.Disp.CreateStatsMissDisp=function(e){const t=document.createDocumentFragment();t.appendChild(document.createTextNode(`${e.length} `));const o=document.createElement("span");o.onmouseout=function(){Game.tooltip.hide()};const i=document.createElement("div"),n=document.createElement("div");n.style.minWidth="140px",n.style.marginBottom="4px";const a=document.createElement("div");a.className="name",a.style.marginBottom="4px",a.style.textAlign="center",a.textContent="Missing",n.appendChild(a);for(const t of Object.keys(e)){const o=document.createElement("div");o.style.textAlign="center",o.appendChild(document.createTextNode(e[t])),n.appendChild(o)}return i.appendChild(n),o.onmouseover=function(){Game.tooltip.draw(this,escape(i.innerHTML))},o.style.cursor="default",o.style.display="inline-block",o.style.height="10px",o.style.width="10px",o.style.borderRadius="5px",o.style.textAlign="center",o.style.backgroundColor="#C0C0C0",o.style.color="black",o.style.fontSize="9px",o.style.verticalAlign="bottom",o.textContent="?",t.appendChild(o),t},CM.Disp.CreateStatsLuckySection=function(){const t=Game.auraMult("Dragon's Fortune")?"GoldCookDragonsFortuneTooltipPlaceholder":"GoldCookTooltipPlaceholder",o=document.createElement("div");o.className="CMStatsLuckySection";const i=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.Lucky?CM.Disp.colorRed:CM.Disp.colorGreen,n=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.Lucky?CM.Disp.FormatTime((CM.Cache.Lucky-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",a=document.createDocumentFragment(),s=document.createElement("span");if(s.style.fontWeight="bold",s.className=CM.Disp.colorTextPre+i,s.textContent=e(CM.Cache.Lucky),a.appendChild(s),""!==n){const e=document.createElement("small");e.textContent=` (${n})`,a.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Lucky!" Cookies Required',a,t));const l=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.LuckyFrenzy?CM.Disp.colorRed:CM.Disp.colorGreen,r=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.LuckyFrenzy?CM.Disp.FormatTime((CM.Cache.LuckyFrenzy-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",p=document.createDocumentFragment(),C=document.createElement("span");if(C.style.fontWeight="bold",C.className=CM.Disp.colorTextPre+l,C.textContent=e(CM.Cache.LuckyFrenzy),p.appendChild(C),""!==r){const e=document.createElement("small");e.textContent=` (${r})`,p.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Lucky!" Cookies Required (Frenzy)',p,t));const c=CM.Cache.LuckyReward!==CM.Cache.LuckyWrathReward,d=document.createElement("span");d.style.fontWeight="bold",d.className=CM.Disp.colorTextPre+CM.Cache.LuckyReward,d.textContent=e(CM.Cache.LuckyReward)+(c?` / ${e(CM.Cache.LuckyWrathReward)}`:""),o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Lucky!" Reward (MAX)'+(c?" (Golden / Wrath)":""),d,t));const m=document.createElement("span");m.style.fontWeight="bold",m.className=CM.Disp.colorTextPre+m,m.textContent=e(CM.Cache.LuckyRewardFrenzy)+(c?` / ${e(CM.Cache.LuckyWrathRewardFrenzy)}`:""),o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Lucky!" Reward (MAX) (Frenzy)'+(c?" (Golden / Wrath)":""),m,t));const M=Math.min(.15*(Game.cookies+CM.Disp.GetWrinkConfigBank()),CM.Cache.NoGoldSwitchCookiesPS*CM.Cache.DragonsFortuneMultAdjustment*60*15)+13,u=document.createElement("span");return u.style.fontWeight="bold",u.className=CM.Disp.colorTextPre+u,u.textContent=e(CM.Cache.GoldenCookiesMult*M)+(c?` / ${e(CM.Cache.WrathCookiesMult*M)}`:""),o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Lucky!" Reward (CUR)'+(c?" (Golden / Wrath)":""),u,t)),o},CM.Disp.CreateStatsChainSection=function(){const t=Game.auraMult("Dragon's Fortune")?"GoldCookDragonsFortuneTooltipPlaceholder":"GoldCookTooltipPlaceholder",o=document.createElement("div");o.className="CMStatsChainSection";const i=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainRequired?CM.Disp.colorRed:CM.Disp.colorGreen,n=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainRequired?CM.Disp.FormatTime((CM.Cache.ChainRequired-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",a=document.createDocumentFragment(),s=document.createElement("span");if(s.style.fontWeight="bold",s.className=CM.Disp.colorTextPre+i,s.textContent=e(CM.Cache.ChainRequired),a.appendChild(s),""!==n){const e=document.createElement("small");e.textContent=` (${n})`,a.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Cookies Required',a,t));const l=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainWrathRequired?CM.Disp.colorRed:CM.Disp.colorGreen,r=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainWrathRequired?CM.Disp.FormatTime((CM.Cache.ChainWrathRequired-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",p=document.createDocumentFragment(),C=document.createElement("span");if(C.style.fontWeight="bold",C.className=CM.Disp.colorTextPre+l,C.textContent=e(CM.Cache.ChainWrathRequired),p.appendChild(C),""!==r){const e=document.createElement("small");e.textContent=` (${r})`,p.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Cookies Required (Wrath)',p,t));const c=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainFrenzyRequired?CM.Disp.colorRed:CM.Disp.colorGreen,d=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainFrenzyRequired?CM.Disp.FormatTime((CM.Cache.ChainFrenzyRequired-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",m=document.createDocumentFragment(),M=document.createElement("span");if(M.style.fontWeight="bold",M.className=CM.Disp.colorTextPre+c,M.textContent=e(CM.Cache.ChainFrenzyRequired),m.appendChild(M),""!==d){const e=document.createElement("small");e.textContent=` (${d})`,m.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Cookies Required (Frenzy)',m,t));const u=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainFrenzyWrathRequired?CM.Disp.colorRed:CM.Disp.colorGreen,h=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.ChainFrenzyWrathRequired?CM.Disp.FormatTime((CM.Cache.ChainFrenzyWrathRequired-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",g=document.createDocumentFragment(),D=document.createElement("span");if(D.style.fontWeight="bold",D.className=CM.Disp.colorTextPre+u,D.textContent=e(CM.Cache.ChainFrenzyWrathRequired),g.appendChild(D),""!==h){const e=document.createElement("small");e.textContent=` (${h})`,g.appendChild(e)}o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Cookies Required (Frenzy) (Wrath)',g,t)),o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Reward (MAX) (Golden / Wrath)',document.createTextNode(`${e(CM.Cache.ChainMaxReward[0])} / ${e(CM.Cache.ChainMaxWrathReward[0])}`),t)),o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Reward (MAX) (Frenzy) (Golden / Wrath)',document.createTextNode(`${e(CM.Cache.ChainFrenzyMaxReward[0])} / ${e(CM.Cache.ChainFrenzyMaxWrathReward[0])}`),t));const y=Math.min(60*Game.cookiesPs*60*6*CM.Cache.DragonsFortuneMultAdjustment,.5*Game.cookies),f=CM.Cache.MaxChainCookieReward(7,y,CM.Cache.GoldenCookiesMult)[0],T=CM.Cache.MaxChainCookieReward(6,y,CM.Cache.WrathCookiesMult)[0];return o.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Chain" Reward (CUR) (Golden / Wrath)',document.createTextNode(`${e(f)} / ${e(T)}`),t)),o.appendChild(CM.Disp.CreateStatsListing("withTooltip","CPS Needed For Next Level (G / W)",document.createTextNode(`${e(CM.Cache.ChainRequiredNext)} / ${e(CM.Cache.ChainWrathRequiredNext)}`),"ChainNextLevelPlaceholder")),o.appendChild(CM.Disp.CreateStatsListing("withTooltip","CPS Needed For Next Level (Frenzy) (G / W)",document.createTextNode(`${e(CM.Cache.ChainFrenzyRequiredNext)} / ${e(CM.Cache.ChainFrenzyWrathRequiredNext)}`),"ChainNextLevelPlaceholder")),o},CM.Disp.CreateStatsSpellsSection=function(){const t=document.createElement("div");t.className="CMStatsSpellsSection";const o=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.Conjure?CM.Disp.colorRed:CM.Disp.colorGreen,i=Game.cookies+CM.Disp.GetWrinkConfigBank()<CM.Cache.Conjure?CM.Disp.FormatTime((CM.Cache.Conjure-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",n=document.createDocumentFragment(),a=document.createElement("span");if(a.style.fontWeight="bold",a.className=CM.Disp.colorTextPre+o,a.textContent=e(CM.Cache.Conjure),n.appendChild(a),""!==i){const e=document.createElement("small");e.textContent=` (${i})`,n.appendChild(e)}t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Conjure Baked Goods" Cookies Required',n,"GoldCookTooltipPlaceholder")),t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Conjure Baked Goods" Reward (MAX)',document.createTextNode(CM.Disp.Beautify(CM.Cache.ConjureReward)),"GoldCookTooltipPlaceholder"));const s=Game.cookies+CM.Disp.GetWrinkConfigBank()<7*CM.Cache.Conjure?CM.Disp.colorRed:CM.Disp.colorGreen,l=Math.min(.15*(Game.cookies+CM.Disp.GetWrinkConfigBank()),60*CM.Cache.NoGoldSwitchCookiesPS*30),r=Game.cookies+CM.Disp.GetWrinkConfigBank()<7*CM.Cache.Conjure?CM.Disp.FormatTime((7*CM.Cache.Conjure-(Game.cookies+CM.Disp.GetWrinkConfigBank()))/CM.Disp.GetCPS()):"",p=document.createDocumentFragment(),C=document.createElement("span");if(C.style.fontWeight="bold",C.className=CM.Disp.colorTextPre+s,C.textContent=e(7*CM.Cache.Conjure),p.appendChild(C),""!==r){const e=document.createElement("small");e.textContent=` (${r})`,p.appendChild(e)}return t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Conjure Baked Goods" Cookies Required (Frenzy)',p,"GoldCookTooltipPlaceholder")),t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Conjure Baked Goods" Reward (MAX) (Frenzy)',document.createTextNode(CM.Disp.Beautify(7*CM.Cache.ConjureReward)),"GoldCookTooltipPlaceholder")),t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Conjure Baked Goods" Reward (CUR)',document.createTextNode(CM.Disp.Beautify(l)),"GoldCookTooltipPlaceholder")),CM.Cache.Edifice&&t.appendChild(CM.Disp.CreateStatsListing("withTooltip",'"Spontaneous Edifice" Cookies Required (most expensive building)',document.createTextNode(`${CM.Disp.Beautify(CM.Cache.Edifice)} (${CM.Cache.EdificeBuilding})`),"GoldCookTooltipPlaceholder")),t},CM.Disp.CreateStatsGardenSection=function(){const t=document.createElement("div");t.className="CMStatsGardenSection";const o=Game.cookies<60*Game.cookiesPs*30?CM.Disp.colorRed:CM.Disp.colorGreen,i=document.createElement("span");i.style.fontWeight="bold",i.className=CM.Disp.colorTextPre+o,i.textContent=e(60*Game.cookiesPs*30),t.appendChild(CM.Disp.CreateStatsListing("basic","Cookies required for max reward of Bakeberry: ",i));const n=Game.cookies<60*Game.cookiesPs*3?CM.Disp.colorRed:CM.Disp.colorGreen,a=document.createElement("span");a.style.fontWeight="bold",a.className=CM.Disp.colorTextPre+n,a.textContent=e(60*Game.cookiesPs*3),t.appendChild(CM.Disp.CreateStatsListing("basic","Cookies required for max reward of Chocoroot: ",a));const s=Game.cookies<60*Game.cookiesPs*60?CM.Disp.colorRed:CM.Disp.colorGreen,l=document.createElement("span");l.style.fontWeight="bold",l.className=CM.Disp.colorTextPre+s,l.textContent=e(60*Game.cookiesPs*60),t.appendChild(CM.Disp.CreateStatsListing("basic","Cookies required for max reward of Queenbeet: ",l));const r=Game.cookies<60*Game.cookiesPs*120?CM.Disp.colorRed:CM.Disp.colorGreen,p=document.createElement("span");return p.style.fontWeight="bold",p.className=CM.Disp.colorTextPre+r,p.textContent=e(60*Game.cookiesPs*120),t.appendChild(CM.Disp.CreateStatsListing("basic","Cookies required for max reward of Duketater: ",p)),t},CM.Disp.CreateStatsPrestigeSection=function(){const t=document.createElement("div");t.className="CMStatsPrestigeSection";const o=Math.floor(Game.HowMuchPrestige(CM.Cache.RealCookiesEarned+Game.cookiesReset+CM.Cache.WrinklersTotal+(Game.HasUnlocked("Chocolate egg")&&!Game.Has("Chocolate egg")?CM.Cache.lastChoEgg:0)));t.appendChild(CM.Disp.CreateStatsListing("withTooltip","Prestige Level (CUR / MAX)",document.createTextNode(`${e(Game.prestige)} / ${e(o)}`),"PrestMaxTooltipPlaceholder"));const i=Game.HowManyCookiesReset(o+1)-(CM.Cache.RealCookiesEarned+Game.cookiesReset+CM.Cache.WrinklersTotal+(Game.HasUnlocked("Chocolate egg")&&!Game.Has("Chocolate egg")&&CM.Cache.lastChoEgg?CM.Cache.lastChoEgg:0)),n=document.createDocumentFragment();n.appendChild(document.createTextNode(e(i)));const a=document.createElement("small");a.textContent=` (${CM.Disp.FormatTime(i/CM.Cache.AvgCPSWithChoEgg,1)})`,n.appendChild(a),t.appendChild(CM.Disp.CreateStatsListing("withTooltip","Cookies To Next Level",n,"NextPrestTooltipPlaceholder")),t.appendChild(CM.Disp.CreateStatsListing("withTooltip","Heavenly Chips (CUR / MAX)",document.createTextNode(`${e(Game.heavenlyChips)} / ${e(o-Game.prestige+Game.heavenlyChips)}`),"HeavenChipMaxTooltipPlaceholder")),t.appendChild(CM.Disp.CreateStatsListing("basic","Heavenly Chips Per Second (last 5 seconds)",document.createTextNode(e(CM.Cache.HCPerSecond,2))));const s=Number(CM.Options.HeavenlyChipsTarget);if(!isNaN(s)){const o=s-Math.floor(Game.HowMuchPrestige(Game.cookiesReset+Game.cookiesEarned));o>0&&(t.appendChild(CM.Disp.CreateStatsListing("basic","Heavenly Chips To Target Set In Settings (CUR)",document.createTextNode(e(o)))),t.appendChild(CM.Disp.CreateStatsListing("basic","Time To Target (CUR, Current 5 Second Average)",document.createTextNode(CM.Disp.FormatTime(o/CM.Cache.HCPerSecond)))))}const l=CM.Sim.ResetBonus(o),r=document.createDocumentFragment();r.appendChild(document.createTextNode(e(l)));const p=Math.round(l/Game.cookiesPs*1e4);if(isFinite(p)&&0!==p){const e=document.createElement("small");e.textContent=` (${p/100}% of income)`,r.appendChild(e)}t.appendChild(CM.Disp.CreateStatsListing("withTooltip","Reset Bonus Income",r,"ResetTooltipPlaceholder"));const C=Math.floor(Game.HowMuchPrestige(Game.cookiesReset)),c=Math.floor(Game.HowMuchPrestige(Game.cookiesReset+Game.cookiesEarned)),d=c-C;if(!Game.Has("Lucky digit")){let e=7-c%10;e<0&&(e+=10);const o=d+e,i=c+e,n=document.createDocumentFragment();n.appendChild(document.createTextNode(`${i.toLocaleString()} / ${o.toLocaleString()} (+${e})`)),t.appendChild(CM.Disp.CreateStatsListing("basic",'Next "Lucky Digit" (total / reset)',n))}if(!Game.Has("Lucky number")){let e=777-c%1e3;e<0&&(e+=1e3);const o=d+e,i=c+e,n=document.createDocumentFragment();n.appendChild(document.createTextNode(`${i.toLocaleString()} / ${o.toLocaleString()} (+${e})`)),t.appendChild(CM.Disp.CreateStatsListing("basic",'Next "Lucky Number" (total / reset)',n))}if(!Game.Has("Lucky payout")){let e=777777-c%1e6;e<0&&(e+=1e6);const o=d+e,i=c+e,n=document.createDocumentFragment();n.appendChild(document.createTextNode(`${i.toLocaleString()} / ${o.toLocaleString()} (+${e})`)),t.appendChild(CM.Disp.CreateStatsListing("basic",'Next "Lucky Payout" (total / reset)',n))}return t},CM.Disp.AddMissingUpgrades=function(){for(const e of l("menu").children)if(e.children[0])if("Prestige"===e.children[0].innerHTML&&CM.Cache.MissingUpgradesPrestige){const t=CM.Cache.MissingUpgradesPrestige.match(new RegExp("div","g")||0).length/2,o=document.createElement("div");o.id="CMMissingUpgradesPrestigeTitle",o.className="listing";const i=document.createElement("div");i.innerHTML=`<b>Missing Prestige upgrades:</b> ${t}/${Game.PrestigeUpgrades.length} (${Math.floor(t/Game.PrestigeUpgrades.length*100)}%)`,o.appendChild(i),e.appendChild(o);const n=document.createElement("div");n.className="listing crateBox",n.innerHTML=CM.Cache.MissingUpgradesPrestige,e.appendChild(n)}else if("Upgrades"===e.children[0].innerHTML){if(CM.Cache.MissingUpgrades){const t=CM.Cache.MissingUpgrades.match(new RegExp("div","g")||0).length/2,o=document.createElement("div");o.id="CMMissingUpgradesTitle",o.className="listing";const i=document.createElement("div");i.innerHTML=`<b>Missing normal upgrades:</b> ${t}/${Game.UpgradesByPool[""].length+Game.UpgradesByPool.tech.length} (${Math.floor(t/(Game.UpgradesByPool[""].length+Game.UpgradesByPool.tech.length)*100)}%)`,o.appendChild(i),e.insertBefore(o,e.childNodes[3]);const n=document.createElement("div");n.className="listing crateBox",n.innerHTML=CM.Cache.MissingUpgrades,e.insertBefore(n,document.getElementById("CMMissingUpgradesTitle").nextSibling)}if(CM.Cache.MissingUpgradesCookies){const t=CM.Cache.MissingUpgradesCookies.match(new RegExp("div","g")||0).length/2,o=document.createElement("div");o.id="CMMissingUpgradesCookiesTitle",o.className="listing";const i=document.createElement("div");i.innerHTML=`<b>Missing Cookie upgrades:</b> ${t}/${Game.UpgradesByPool.cookie.length} (${Math.floor(t/Game.UpgradesByPool.cookie.length*100)}%)`,o.appendChild(i),e.appendChild(o);const n=document.createElement("div");n.className="listing crateBox",n.innerHTML=CM.Cache.MissingUpgradesCookies,e.appendChild(n)}}},CM.Disp.crateMissing=function(e){let t="crate upgrade missing";"prestige"===e.pool&&(t+=" heavenly");let o=0;Game.prefs.crates||(o=1),o&&(t+=" noFrame");let i=e.icon;e.iconFunction&&(i=e.iconFunction());const n=`function() {return Game.crateTooltip(Game.UpgradesById[${e.id}], 'stats');}`;return`<div class="${t}"\n\t${Game.getDynamicTooltip(n,"top",!0)}\n\tstyle = "${i[2]?`background-image: url(${i[2]});`:""}background-position:${48*-i[0]}px ${48*-i[1]}px;">\n\t</div>`},CM.Disp.AddMenuInfo=function(e){const t=document.createElement("div");t.className="subsection";const o=document.createElement("span");if(o.style.cursor="pointer",o.style.display="inline-block",o.style.height="14px",o.style.width="14px",o.style.borderRadius="7px",o.style.textAlign="center",o.style.backgroundColor="#C0C0C0",o.style.color="black",o.style.fontSize="13px",o.style.verticalAlign="middle",o.textContent=CM.Options.Header.InfoTab?"-":"+",o.onclick=function(){CM.Config.ToggleHeader("InfoTab"),Game.UpdateMenu()},e.appendChild(o),t.appendChild(e),CM.Options.Header.InfoTab){const e=document.createElement("div");e.innerHTML=CM.Data.ModDescription,t.appendChild(e);const o=document.createElement("div");o.innerHTML=CM.Data.LatestReleaseNotes,t.appendChild(o)}const i=l("menu").children[1];i.insertBefore(t,i.children[1])},CM.Disp.CreateWrinklerButtons=function(){const e=document.createElement("a");e.id="PopAllNormalWrinklerButton",e.textContent="Pop All Normal",e.className="option",e.onclick=function(){CM.Disp.PopAllNormalWrinklers()},l("sectionLeftExtra").children[0].append(e);const t=document.createElement("a");t.id="PopFattestWrinklerButton",t.textContent="Pop Single Fattest",t.className="option",t.onclick=function(){null!==CM.Cache.WrinklersFattest[1]&&(Game.wrinklers[CM.Cache.WrinklersFattest[1]].hp=0)},l("sectionLeftExtra").children[0].append(t)},CM.Disp.UpdateWrinklerButtons=function(){CM.Options.WrinklerButtons?(l("PopAllNormalWrinklerButton").style.display="",l("PopFattestWrinklerButton").style.display=""):(l("PopAllNormalWrinklerButton").style.display="none",l("PopFattestWrinklerButton").style.display="none")},CM.Disp.TooltipText=[["GoldCookTooltipPlaceholder","Calculated with Golden Switch off","200px"],["GoldCookDragonsFortuneTooltipPlaceholder","Calculated with Golden Switch off and at least one golden cookie on-screen","240px"],["PrestMaxTooltipPlaceholder","The MAX prestige is calculated with the cookies gained from popping all wrinklers with Skruuia god in Diamond slot, selling all stock market goods, selling all buildings with Earth Shatterer and Reality Bending auras, and buying Chocolate egg","320px"],["NextPrestTooltipPlaceholder","Calculated with cookies gained from wrinklers and Chocolate egg","200px"],["HeavenChipMaxTooltipPlaceholder","The MAX heavenly chips is calculated with the cookies gained from popping all wrinklers with Skruuia god in Diamond slot, selling all stock market goods, selling all buildings with Earth Shatterer and Reality Bending auras, and buying Chocolate egg","330px"],["ResetTooltipPlaceholder","The bonus income you would get from new prestige levels unlocked at 100% of its potential and from ascension achievements if you have the same buildings/upgrades after reset","370px"],["ChoEggTooltipPlaceholder","The amount of cookies you would get from popping all wrinklers with Skruuia god in Diamond slot, selling all stock market goods, selling all buildings with Earth Shatterer and Reality Bending auras, and then buying Chocolate egg","300px"],["ChainNextLevelPlaceholder","Cheated cookies might break this formula","250px"]],CM.Disp.colorTextPre="CMText",CM.Disp.colorBackPre="CMBack",CM.Disp.colorBorderPre="CMBorder",CM.Disp.colorBlue="Blue",CM.Disp.colorGreen="Green",CM.Disp.colorYellow="Yellow",CM.Disp.colorOrange="Orange",CM.Disp.colorRed="Red",CM.Disp.colorPurple="Purple",CM.Disp.colorGray="Gray",CM.Disp.colorPink="Pink",CM.Disp.colorBrown="Brown",CM.Disp.colors=[CM.Disp.colorGray,CM.Disp.colorBlue,CM.Disp.colorGreen,CM.Disp.colorYellow,CM.Disp.colorOrange,CM.Disp.colorRed,CM.Disp.colorPurple,CM.Disp.colorPink,CM.Disp.colorBrown],CM.Disp.buffColors={Frenzy:CM.Disp.colorYellow,"Dragon Harvest":CM.Disp.colorBrown,"Elder frenzy":CM.Disp.colorGreen,Clot:CM.Disp.colorRed,"Click frenzy":CM.Disp.colorBlue,Dragonflight:CM.Disp.colorPink},CM.Disp.GCTimers={},CM.Disp.cookieTimes=[10,15,30,60,300,600,900,1800],CM.Disp.clickTimes=[1,5,10,15,30],CM.Disp.TooltipWrinklerBeingShown=[],CM.Disp.TooltipWrinklerArea=0,CM.Disp.TooltipWrinkler=-1,CM.Disp.Title="",CM.Disp.LastTargetBotBar=1,CM.Disp.LastTargetBuildings=1,CM.Disp.LastTargetTooltipBuilding=1})();